<div class="p-2 bg-gray-50 max-h-screen">
  <!-- Header Section -->
  <div class="mb-6">
    <h1 class="text-3xl font-semibold text-gray-900 mb-1">Customers</h1>
    <p class="text-md text-gray-600">Manage customer information and data</p>
  </div>

  <!-- Search and Filter Bar -->
  <div class="flex items-center gap-4 mb-4">
    <p-iconfield class="min-w-lg">
      <p-inputicon class="pi pi-search" />
      <input
        class="w-full bg-white!"
        type="text"
        variant="filled"
        pInputText
        placeholder="Search By Customer ID, Name, PAN..."
      />
    </p-iconfield>

    <div class="flex items-center gap-2">
      <!-- Total O/S Filter Popover -->
      <p-button
        (click)="totalOSPopover.toggle($event)"
        label="Total O/S"
        [outlined]="true"
        icon="pi pi-chevron-down"
        iconPos="right"
        class="text-sm bg-white!"
      />
      <p-popover #totalOSPopover>
        <div class="flex flex-col gap-4 p-4">
          <span class="font-semibold text-gray-900 text-lg">Filter by Total O/S Range</span>

          <div>
            <label class="font-medium text-gray-900 block mb-2">From Date</label>
            <p-datepicker
              [(ngModel)]="fromDate"
              dateFormat="dd-mm-yy"
              placeholder="dd-mm-yyyy"
              [showIcon]="true"
              class="w-full"
            />
          </div>

          <div>
            <label class="font-medium text-gray-900 block mb-2">To Date</label>
            <p-datepicker
              [(ngModel)]="toDate"
              dateFormat="dd-mm-yy"
              placeholder="dd-mm-yyyy"
              [showIcon]="true"
              class="w-full"
            />
          </div>

          <div class="w-full flex justify-between mt-2">
            <p-button label="Clear" [outlined]="true" (click)="clearDateNPAFilter()" />
            <p-button label="Apply" (click)="applyDateNPAFilter()" severity="danger" />
          </div>
        </div>
      </p-popover>

      <!-- Date of NPA Filter Popover -->
      <p-button
        (click)="dateNPAPopover.toggle($event)"
        label="Date of NPA"
        [outlined]="true"
        icon="pi pi-chevron-down"
        iconPos="right"
        class="text-sm bg-white!"
      />
      <p-popover #dateNPAPopover>
        <div class="flex flex-col gap-4 p-4">
          <span class="font-semibold text-gray-900 text-lg">Filter by NPA Date Range</span>

          <div>
            <label class="font-medium text-gray-900 block mb-2">From Date</label>
            <p-datepicker
              [(ngModel)]="fromDate"
              dateFormat="dd-mm-yy"
              placeholder="dd-mm-yyyy"
              [showIcon]="true"
              class="w-full"
            />
          </div>

          <div>
            <label class="font-medium text-gray-900 block mb-2">To Date</label>
            <p-datepicker
              [(ngModel)]="toDate"
              dateFormat="dd-mm-yy"
              placeholder="dd-mm-yyyy"
              [showIcon]="true"
              class="w-full"
            />
          </div>

          <div class="w-full flex justify-between mt-2">
            <p-button label="Clear" [outlined]="true" (click)="clearDateNPAFilter()" />
            <p-button label="Apply" (click)="applyDateNPAFilter()" severity="danger" />
          </div>
        </div>
      </p-popover>
    </div>
  </div>

  <!-- Table Card -->
  <div class="bg-white rounded-lg shadow-sm overflow-hidden">
    <!-- Table -->
    <p-table
      [value]="customers"
      [tableStyle]="{ 'min-width': '100%' }"
      styleClass="customers-table"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="text-left">Customer ID</th>
          <th class="text-left">Customer Name</th>
          <th class="text-left" pSortableColumn="totalOYS">
            <div class="flex items-center gap-1 cursor-pointer">
              Total O/S
              <p-sortIcon field="totalOYS" />
              <!-- <i class="pi pi-arrow-up text-gray-400 text-xs"></i> -->
            </div>
          </th>
          <th class="text-left" pSortableColumn="dateOfNPA">
            <div class="flex items-center gap-1 cursor-pointer">
              Date of NPA
              <p-sortIcon field="dateOfNPA" />
              <!-- <i class="pi pi-arrow-up text-gray-400 text-xs"></i> -->
            </div>
          </th>
          <th class="text-left">PAN Number</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-customer>
        <tr class="cursor-pointer">
          <td>{{ customer.customerId }}</td>
          <td>{{ customer.customerName }}</td>
          <td>â‚¹{{ customer.totalOYS | number: '1.0-0' }}</td>
          <td>{{ customer.dateOfNPA }}</td>
          <td>{{ customer.panNumber }}</td>
        </tr>
      </ng-template>
    </p-table>

    <!-- Footer with Pagination -->
  </div>
  <div class="py-4 flex items-center justify-between">
    <div class="text-md font-semibold text-gray-500">
      Showing 1 to 10 of {{ totalRecords }} customers
    </div>
    <p-paginator
      [first]="first"
      [rows]="rows"
      [totalRecords]="totalRecords"
      (onPageChange)="onPageChange($event)"
      [showPageLinks]="true"
      [showFirstLastIcon]="true"
      class="text-md font-semibold"
    ></p-paginator>
  </div>
</div>
