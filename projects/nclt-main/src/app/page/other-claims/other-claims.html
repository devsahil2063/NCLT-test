<div class="p-2 bg-gray-50 min-h-screen">
    <p-card class="shadow-sm mb-4">
        <!-- Header -->
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-0 justify-between">
            <div>
                <h2 class="section-heading">Other Claims</h2>
                <p class="section-subheading">List of other claims not categorized as FC or OC</p>
            </div>
            <p-button label="Add Other Claim" icon="pi pi-plus" severity="danger" (click)="openAddDialog()"
                size="small" />
        </div>

    </p-card>

    <p-card class="shadow-sm custom-card">
        <!-- Table -->
        <p-table [value]="claims" [tableStyle]="{ 'min-width': '100%' }" showGridlines class="custom-table">
            <ng-template pTemplate="header">
                <tr>
                    <th class="text-left">Sr. No</th>
                    <th class="text-left">Claim Others</th>
                    <th class="text-left">Admitted Claim Amount</th>
                    <th class="text-left">% Share</th>
                    <th class="text-left">Actions</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-claim>
                <tr>
                    <td>{{ claim.srNo }}</td>
                    <td>{{ claim.claimType }}</td>
                    <td>â‚¹{{ claim.admittedAmount | number: '1.2-2' }}</td>
                    <td>{{ claim.sharePercentage | number: '1.2-2' }}%</td>
                    <td>
                        <div class="flex items-center gap-2">
                            <button (click)="openEditDialog(claim)"
                                class="p-2 hover:bg-gray-100 rounded transition-colors" title="Edit">
                                <i class="pi pi-pencil text-gray-600"></i>
                            </button>
                            <button (click)="deleteClaim(claim)" class="p-2 hover:bg-red-50 rounded transition-colors"
                                title="Delete">
                                <i class="pi pi-trash text-red-500"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </ng-template>
            <ng-template pTemplate="emptymessage">
                <tr>
                    <td colspan="5" class="text-center text-gray-500 py-8">
                        No other claims added yet. Click "Add Other Claim" to get started.
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </p-card>

    <!-- Add/Edit Other Claim Dialog -->
    <p-dialog [header]="editMode ? 'Edit Other Claim' : 'Add Other Claim'" [(visible)]="showDialog" [modal]="true"
        [closable]="true" [style]="{ width: '30vw' }" [draggable]="false" [resizable]="false">
        <p class="page-subheading">
            {{ editMode ? 'Update the other claim information' : 'Fill in the other claim information' }}
        </p>
        <p-divider></p-divider>

        <div class="flex flex-col gap-4">
            <!-- Claim Type -->
            <div class="flex flex-col gap-2">
                <label class="field-label">
                    Claim Type <span class="text-red-500">*</span>
                </label>
                <input type="text" pSize="small" pInputText [(ngModel)]="formData.claimType"
                    placeholder="Enter claim type (e.g., Workmen Dues, Government Dues)" class="w-full" pSize="small" />
            </div>

            <!-- Admitted Claim Amount -->
            <div class="flex flex-col gap-2">
                <label class="field-label">
                    Admitted Claim Amount <span class="text-red-500">*</span>
                </label>
                <p-inputnumber [(ngModel)]="formData.admittedAmount" size="small" mode="currency" currency="INR"
                    locale="en-IN" placeholder="Enter admitted amount" class="w-full" size="small" />
            </div>
        </div>

        <ng-template pTemplate="footer">
            <div class="flex justify-end gap-3 mt-4">
                <p-button label="Cancel" [outlined]="true" severity="secondary" (click)="closeDialog()" size="small" />
                <p-button [label]="editMode ? 'Update Claim' : 'Add Claim'" icon="pi pi-check" severity="danger"
                    (click)="saveClaim()" [disabled]="!isFormValid()" size="small" />
            </div>
        </ng-template>
    </p-dialog>
</div>