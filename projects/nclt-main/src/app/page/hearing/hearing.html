<div class="min-h-screen bg-page p-6">
  <!-- Header Section -->
  <div class="bg-white rounded-lg shadow-sm p-6 flex items-center justify-between">
    <!-- Search Bar -->
    <div class="mb-4 flex items-center gap-4">
      <p-iconfield styleClass="bg-white min-w-lg">
        <p-inputicon styleClass="pi pi-search" />
        <input
          class="w-full bg-white"
          type="text"
          pInputText
          [(ngModel)]="searchTerm"
          placeholder="Search hearings..."
        />
      </p-iconfield>
    </div>
    <div class="flex items-center gap-3">
      <p-button label="Outcome" [outlined]="true" icon="pi pi-filter" styleClass="bg-white" />
      <p-button label="Date Range" [outlined]="true" icon="pi pi-calendar" styleClass="bg-white" />
      <p-button
        label="Add Hearing"
        icon="pi pi-plus"
        severity="danger"
        (onClick)="showAddDialog()"
      />
    </div>
  </div>

  <!-- Table Card -->
  <div class="overflow-hidden rounded-lg bg-white shadow-sm mt-6">
    <p-table
      [value]="filteredHearings"
      [tableStyle]="{ 'min-width': '100%' }"
      showGridlines
      class="hearings-table"
    >
      <ng-template pTemplate="header">
        <tr>
          <th class="text-left" style="width: 4rem">Action</th>
          <th class="text-left">Date of Hearing</th>
          <th class="text-left">Next Date of Hearing</th>
          <th class="text-left">Gist of Hearing</th>
          <th class="text-left">View Court Order</th>
          <th class="text-left">Name of Bank Official's</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-hearing>
        <tr>
          <td>
            <div class="flex items-center gap-2">
              <button
                (click)="viewHearing(hearing)"
                class="rounded p-1.5 text-gray-600 transition-colors hover:bg-gray-100"
                title="View"
              >
                <i class="pi pi-eye"></i>
              </button>
              <button
                (click)="editHearing(hearing)"
                class="rounded p-1.5 text-gray-600 transition-colors hover:bg-gray-100"
                title="Edit"
              >
                <i class="pi pi-pencil"></i>
              </button>
              <button
                (click)="deleteHearing(hearing)"
                class="rounded p-1.5 text-red-600 transition-colors hover:bg-red-50"
                title="Delete"
              >
                <i class="pi pi-trash"></i>
              </button>
            </div>
          </td>
          <td class="text-body">{{ hearing.dateOfHearing }}</td>
          <td class="text-body">{{ hearing.nextDateOfHearing }}</td>
          <td class="text-body">
            <div class="max-w-md truncate">{{ hearing.gistOfHearing }}</div>
          </td>
          <td>
            <button
              (click)="downloadCourtOrder(hearing)"
              class="flex items-center gap-3 text-[--p-primary-color] transition-colors hover:text-[--p-primary-600]"
            >
              <i class="pi pi-download"></i>
              <span class="font-medium">Download</span>
            </button>
          </td>
          <td class="text-body">{{ hearing.bankOfficialName }}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="6" class="text-center">
            <div class="py-8">
              <i class="pi pi-inbox mb-3 text-4xl text-gray-400"></i>
              <p class="text-muted text-lg">No hearings found</p>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Add/Edit Hearing Dialog -->
  <p-dialog
    [header]="isEditMode ? 'Edit Hearing' : 'Add New Hearing'"
    [resizable]="false"
    [modal]="true"
    [maximizable]="false"
    [draggable]="false"
    appendTo="body"
    [(visible)]="dialogVisible"
    [style]="{ width: '600px' }"
    [contentStyle]="{ overflow: 'visible' }"
  >
    <p class="text-gray-600">
      {{ isEditMode ? 'Update hearing details' : 'Enter hearing details' }}
    </p>
    <p-divider></p-divider>

    <div class="mt-4 flex flex-col gap-4">
      <!-- Date of Hearing -->
      <div class="flex flex-col gap-2">
        <label for="dateOfHearing" class="field-label font-medium">Date of Hearing</label>
        <p-datepicker
          id="dateOfHearing"
          [(ngModel)]="dateOfHearing"
          dateFormat="dd M yy"
          placeholder="Select date"
          [showIcon]="true"
          styleClass="w-full"
        />
      </div>

      <!-- Time of Hearing -->
      <div class="flex flex-col gap-2">
        <label for="timeOfHearing" class="field-label font-medium">Time of Hearing</label>
        <input
          id="timeOfHearing"
          type="time"
          pInputText
          [(ngModel)]="timeOfHearing"
          placeholder="10:30 AM"
          class="w-full"
        />
      </div>

      <!-- Next Date of Hearing -->
      <div class="flex flex-col gap-2">
        <label for="nextDateOfHearing" class="field-label font-medium">Next Date of Hearing</label>
        <p-datepicker
          id="nextDateOfHearing"
          [(ngModel)]="nextDateOfHearing"
          dateFormat="dd M yy"
          placeholder="Select date"
          [showIcon]="true"
          styleClass="w-full"
        />
      </div>

      <!-- Gist of Hearing -->
      <div class="flex flex-col gap-2">
        <label for="gistOfHearing" class="field-label font-medium">Gist of Hearing</label>
        <textarea
          id="gistOfHearing"
          pTextarea
          [(ngModel)]="gistOfHearing"
          placeholder="Enter hearing summary..."
          rows="4"
          class="w-full"
        ></textarea>
      </div>

      <!-- Bank Official Name -->
      <div class="flex flex-col gap-2">
        <label for="bankOfficialName" class="field-label font-medium">Name of Bank Official</label>
        <input
          id="bankOfficialName"
          type="text"
          pInputText
          [(ngModel)]="bankOfficialName"
          placeholder="e.g., Rajesh Kumar (DGM)"
          class="w-full"
        />
      </div>
    </div>

    <ng-template pTemplate="footer">
      <div class="flex justify-between gap-4">
        <p-button label="Cancel" [outlined]="true" (onClick)="dialogVisible = false" />
        <p-button
          [label]="isEditMode ? 'Update' : 'Add Hearing'"
          icon="pi pi-check"
          severity="danger"
          (onClick)="saveHearing()"
          [disabled]="!dateOfHearing || !timeOfHearing || !nextDateOfHearing || !bankOfficialName"
        />
      </div>
    </ng-template>
  </p-dialog>
</div>
