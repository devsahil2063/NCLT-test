<div class="p-2 bg-gray-50 max-h-screen">
  <!-- Table Card -->
  <div class="bg-white rounded-lg shadow-sm overflow-hidden">
    <!-- Search and Filter Bar -->
    <div class="flex items-center justify-between gap-4 p-4">
      <p-iconfield class="flex-1 max-w-md">
        <p-inputicon class="pi pi-search" />
        <input class="w-full bg-white!" type="text" variant="filled" pSize="small" pInputText
          placeholder="Search by Name, Type..." />
      </p-iconfield>

      <div class="flex items-center gap-2">
        <!-- Type Filter Popover -->
        <p-button (click)="typePopover.toggle($event)" label="Type" [outlined]="true" icon="pi pi-filter" iconPos="left"
          class="text-sm bg-white!" size="small" />
        <p-popover #typePopover>
          <div class="flex flex-col gap-3 p-2 min-w-[200px]">
            <span class="font-semibold text-gray-900 text-lg">Filter by Type</span>
            <div class="flex flex-col gap-2">
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" class="rounded" />
                <span class="text-gray-700">Personal Guarantee</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" class="rounded" />
                <span class="text-gray-700">Corporate Guarantee</span>
              </label>
              <label class="flex items-center gap-2 cursor-pointer">
                <input type="checkbox" class="rounded" />
                <span class="text-gray-700">Bank Guarantee</span>
              </label>
            </div>
            <div class="w-full flex justify-between mt-2">
              <p-button label="Clear" [outlined]="true" (click)="clearTypeFilter()" />
              <p-button label="Apply" (click)="applyTypeFilter()" severity="danger" />
            </div>
          </div>
        </p-popover>
      </div>
    </div>

    <!-- Table -->
    <p-table [value]="guarantors" showGridlines [tableStyle]="{ 'min-width': '100%' }" class="custom-table">
      <ng-template pTemplate="header">
        <tr>
          <th class="text-left" rowspan="2">Name</th>
          <th class="text-left" rowspan="2">Type</th>
          <th class="text-center!" colspan="6">Net Worth</th>
        </tr>
        <tr>
          <th class="text-left">Last Accepted</th>
          <th class="text-left">Date of Last Accepted</th>
          <th class="text-left">Source of Last Accepted</th>
          <th class="text-left">Present</th>
          <th class="text-left">Date of Present</th>
          <th class="text-left">Source of Present</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-guarantor>
        <tr class="cursor-pointer">
          <td class="text-(--p-primary-color)!">{{ guarantor.name }}</td>
          <td>{{ guarantor.type }}</td>
          <td class="text-(--p-primary-color)!">{{ guarantor.netWorth.lastAccepted }}</td>
          <td>{{ guarantor.netWorth.dateOfLastAccepted }}</td>
          <td>{{ guarantor.netWorth.sourceOfLastAccepted }}</td>
          <td class="text-(--p-primary-color)!">{{ guarantor.netWorth.present }}</td>
          <td>{{ guarantor.netWorth.dateOfPresent }}</td>
          <td>{{ guarantor.netWorth.sourceOfPresent }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>